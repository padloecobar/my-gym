/* globals.css (Mango Voltage Liquid Glass - Dark-first)
   Goal: aurora world + dark translucent glass + warm signal accents
*/

@layer reset, tokens, base, layout, components, motion, utilities, overrides;

/* --------------------------------------------
   1) Reset
-------------------------------------------- */
@layer reset {
  *,
  *::before,
  *::after { box-sizing: border-box; }

  body {
    margin: 0;
    min-block-size: 100dvh;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  img, picture, video, canvas, svg {
    display: block;
    max-inline-size: 100%;
    block-size: auto;
  }

  input, button, textarea, select {
    font: inherit;
    color: inherit;
  }

  button { cursor: pointer; }

  :where(ul, ol) { padding: 0; margin: 0; list-style: none; }
  :where(h1, h2, h3, h4, h5, h6, p, figure, blockquote) { margin: 0; }
  :where(a) { color: inherit; text-decoration: none; }
  :where(table) { border-collapse: collapse; border-spacing: 0; }
  :where(:target) { scroll-margin-block: 6rem; }
}

/* --------------------------------------------
   2) Tokens (dark-first aurora glass)
-------------------------------------------- */
@layer tokens {
  :root {
    color-scheme: dark;

    /* Typography */
    --font-sans: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial,
      "Apple Color Emoji", "Segoe UI Emoji";
    --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
      "Courier New", monospace;

    /* Type */
    --fs-1: clamp(0.875rem, 0.84rem + 0.2vw, 0.95rem);
    --fs-2: clamp(1rem, 0.95rem + 0.35vw, 1.125rem);
    --fs-3: clamp(1.125rem, 1.05rem + 0.55vw, 1.35rem);
    --fs-4: clamp(1.35rem, 1.2rem + 1vw, 1.9rem);
    --fs-5: clamp(1.7rem, 1.4rem + 1.7vw, 2.6rem);
    --lh-tight: 1.15;
    --lh-normal: 1.5;
    --lh-relaxed: 1.7;

    /* Spacing */
    --space-0: 0;
    --space-1: 0.25rem;
    --space-2: 0.5rem;
    --space-3: 0.75rem;
    --space-4: 1rem;
    --space-5: 1.25rem;
    --space-6: 1.5rem;
    --space-7: 2rem;
    --space-8: 2.5rem;
    --space-9: 3rem;

    /* Shapes (reference is “soft + big”) */
    --r-1: 0.5rem;
    --r-2: 0.875rem;
    --r-3: 1.25rem;
    --r-pill: 999px;
    --radius-card: 1.5rem;      /* 24px */
    --radius-control: var(--r-3);
    --radius-pill: var(--r-pill);

    /* Borders */
    --border-1: 1px;

    /* Motion */
    --dur-press: 120ms;
    --dur-quick: 180ms;
    --dur-enter: 225ms;
    --dur-exit: 195ms;
    --dur-page: 300ms;
    --dur-page-lg: 375ms;

    --dur-1: 120ms;
    --dur-2: 200ms;
    --dur-3: 320ms;

    --ease-standard: cubic-bezier(0.4, 0.0, 0.2, 1);
    --ease-decel: cubic-bezier(0.0, 0.0, 0.2, 1);
    --ease-accel: cubic-bezier(0.4, 0.0, 1, 1);
    --ease-sharp: cubic-bezier(0.4, 0.0, 0.6, 1);

    --ease-1: cubic-bezier(0.2, 0.8, 0.2, 1);
    --ease-2: cubic-bezier(0.2, 0.0, 0.0, 1);

    /* Touch */
    --tap: 48px;

    /* Layout */
    --container-max: 72rem;
    --gutter: clamp(1rem, 2vw, 1.5rem);

    /* ----------------------------
       Mango Voltage Liquid Glass (dark)
    ---------------------------- */
    --neutral-0: oklch(0.10 0.035 260); /* page base */
    --neutral-1: oklch(0.14 0.040 260); /* deep surface */
    --neutral-2: oklch(0.18 0.045 260); /* raised glass */
    --neutral-3: oklch(0.24 0.050 260); /* subtle separation */

    /* Brand palette */
    --hot-1: #FFB300; /* mango gold */
    --hot-2: #FF4D6D; /* coral heat */
    --cool-1: #3D7BFF; /* arctic blue */
    --cool-2: #42FFD2; /* mint glow */

    --accent-1: var(--hot-1);
    --accent-2: var(--hot-2);
    --accent-cool-1: var(--cool-1);
    --accent-cool-2: var(--cool-2);

    --danger-1: color-mix(in srgb, var(--hot-2) 90%, white);
    --success-1: color-mix(in srgb, var(--cool-2) 70%, white);
    --warning-1: color-mix(in srgb, var(--hot-1) 85%, white);

    /* ----------------------------
       Semantic tokens
    ---------------------------- */
    --surface-0: var(--neutral-0);
    --surface-1: color-mix(in srgb, var(--neutral-1) 82%, transparent);
    --surface-2: color-mix(in srgb, var(--neutral-2) 78%, transparent);
    --surface-3: color-mix(in srgb, var(--neutral-2) 88%, transparent);

    --text-1: color-mix(in srgb, white 92%, var(--cool-1) 8%);
    --text-2: color-mix(in srgb, white 70%, var(--cool-1) 10%);
    --text-3: color-mix(in srgb, var(--text-2) 82%, var(--surface-0));
    --placeholder: color-mix(in srgb, var(--text-2) 88%, var(--surface-0));
    --text-shadow: 0 2px 12px color-mix(in srgb, black 55%, transparent);

    --text-ink: var(--text-1);
    --text-muted: var(--text-2);

    /* Border strokes for glass */
    --stroke-1: color-mix(in srgb, white 12%, transparent);
    --stroke-2: color-mix(in srgb, white 20%, transparent);
    --stroke-inner: var(--stroke-1);
    --stroke-outer: var(--stroke-2);

    --focus-ring: color-mix(in srgb, var(--cool-1) 70%, var(--cool-2));
    --on-brand: color-mix(in srgb, black 88%, var(--neutral-0));

    --scrim: color-mix(in srgb, black 58%, transparent);

    /* Surface accents */
    --surface-highlight: color-mix(in srgb, white 14%, transparent);
    --tray-bg: color-mix(in srgb, var(--surface-2) 58%, transparent);
    --tray-sheen: color-mix(in srgb, white 6%, transparent);
    --surface-noise:
      repeating-linear-gradient(0deg,
        color-mix(in srgb, white 3%, transparent) 0px,
        transparent 2px,
        transparent 4px
      );
    --surface-noise-opacity: 0.04;

    /* Elevation */
    --shadow-color: color-mix(in srgb, black 66%, transparent);
    --shadow-1: 0 1px 2px var(--shadow-color);
    --shadow-2: 0 16px 50px var(--shadow-color);
    --shadow-3: 0 28px 90px var(--shadow-color);

    /* Glow */
    --glow-hot: 0 18px 50px color-mix(in srgb, var(--hot-1) 35%, transparent);
    --glow-cool: 0 18px 50px color-mix(in srgb, var(--cool-1) 35%, transparent);

    /* Compatibility aliases */
    --bg: var(--surface-0);
    --surface: var(--surface-1);
    --text: var(--text-1);
    --muted: var(--text-2);
    --border: var(--stroke-1);
    --border-soft: var(--stroke-2);
    --ring: var(--focus-ring);

    --brand: var(--hot-1);
    --success: var(--success-1);
    --warning: var(--warning-1);
    --danger: var(--danger-1);

    --brand-soft: color-mix(in srgb, var(--hot-1) 18%, transparent);
    --glow-brand: var(--glow-hot);

    /* Vibe */
    --bg-aurora:
      radial-gradient(1400px 1000px at 18% -18%,
        color-mix(in srgb, var(--hot-1) 26%, transparent) 0%,
        transparent 64%),
      radial-gradient(1200px 900px at 82% 10%,
        color-mix(in srgb, var(--cool-1) 24%, transparent) 0%,
        transparent 66%),
      var(--neutral-0);

    --glass-soft: color-mix(in srgb, var(--neutral-1) 60%, transparent);
    --glass-mid: color-mix(in srgb, var(--neutral-1) 78%, transparent);
    --glass-strong: color-mix(in srgb, var(--neutral-1) 92%, transparent);
    --glass-1: var(--surface-1);
    --glass-2: var(--surface-2);
    --glass-3: color-mix(in srgb, var(--neutral-1) 68%, transparent);

    --glass-bg: var(--glass-mid);
    --glass-stroke: var(--stroke-inner);
    --glass-stroke-strong: var(--stroke-outer);
    --glass-blur: 20px;
    --glass-blur-soft: 16px;
    --glass-blur-strong: 22px;

    --accent-gradient: linear-gradient(135deg,
      color-mix(in srgb, var(--hot-1) 70%, transparent),
      color-mix(in srgb, var(--hot-2) 75%, transparent)
    );

    --accent-edge: linear-gradient(135deg,
      color-mix(in srgb, var(--hot-1) 40%, transparent),
      color-mix(in srgb, var(--hot-2) 40%, transparent)
    );

    --edge-gradient: linear-gradient(135deg,
      color-mix(in srgb, var(--cool-1) 28%, transparent),
      color-mix(in srgb, var(--cool-2) 24%, transparent),
      color-mix(in srgb, var(--hot-1) 24%, transparent)
    );

    --edge-gradient-soft: linear-gradient(135deg,
      color-mix(in srgb, var(--cool-1) 14%, transparent),
      color-mix(in srgb, var(--cool-2) 12%, transparent),
      color-mix(in srgb, var(--hot-1) 12%, transparent)
    );

    /* Subtle grain */
    --grain:
      repeating-linear-gradient(0deg,
        color-mix(in srgb, white 2%, transparent) 0px,
        transparent 2px,
        transparent 6px
      );

    --ring-size: 3px;
    --ring-offset: 2px;

    /* legacy highlight */
    --accent-hsl: 40 100% 55%;
  }

  /* Optional LIGHT theme, only if you explicitly set <html data-theme="light"> */
  :root[data-theme="light"] {
    color-scheme: light;

    --neutral-0: oklch(0.98 0.01 260);
    --neutral-1: oklch(0.96 0.012 260);
    --neutral-2: oklch(0.93 0.014 260);
    --neutral-3: oklch(0.86 0.016 260);

    --text-1: color-mix(in srgb, black 86%, var(--cool-1));
    --text-2: color-mix(in srgb, black 55%, var(--cool-1));
    --text-3: color-mix(in srgb, var(--text-2) 82%, var(--surface-0));
    --placeholder: color-mix(in srgb, var(--text-2) 88%, var(--surface-0));

    --text-ink: var(--text-1);
    --text-muted: var(--text-2);

    --stroke-1: color-mix(in srgb, black 10%, transparent);
    --stroke-2: color-mix(in srgb, black 16%, transparent);
    --stroke-inner: var(--stroke-1);
    --stroke-outer: var(--stroke-2);

    --scrim: color-mix(in srgb, black 28%, transparent);
    --shadow-color: color-mix(in srgb, black 20%, transparent);

    --glass-soft: color-mix(in srgb, white 72%, transparent);
    --glass-mid: color-mix(in srgb, white 84%, transparent);
    --glass-strong: color-mix(in srgb, white 92%, transparent);
    --glass-1: var(--surface-1);
    --glass-2: var(--surface-2);
    --glass-3: color-mix(in srgb, white 68%, transparent);

    --glass-bg: var(--glass-mid);
    --glass-stroke: var(--stroke-inner);
    --glass-stroke-strong: var(--stroke-outer);

    --bg-aurora:
      radial-gradient(1300px 900px at 18% -12%,
        color-mix(in srgb, var(--hot-1) 22%, transparent) 0%,
        transparent 62%),
      radial-gradient(1100px 800px at 86% 12%,
        color-mix(in srgb, var(--cool-1) 20%, transparent) 0%,
        transparent 64%),
      var(--neutral-0);
  }

  /* OKLCH fallback */
  @supports not (color: oklch(62% 0.18 250)) {
    :root {
      --neutral-0: hsl(255 36% 6%);
      --neutral-1: hsl(255 30% 10%);
      --neutral-2: hsl(255 26% 15%);
      --neutral-3: hsl(255 22% 22%);

      --text-ink: hsl(210 20% 96%);
      --text-muted: hsl(210 10% 76%);

      --stroke-1: color-mix(in srgb, white 12%, transparent);
      --stroke-2: color-mix(in srgb, white 20%, transparent);

      --scrim: color-mix(in srgb, black 58%, transparent);
      --shadow-color: color-mix(in srgb, black 66%, transparent);

      --bg-aurora:
        radial-gradient(1400px 1000px at 18% -18%,
          color-mix(in srgb, var(--hot-1) 26%, transparent) 0%,
          transparent 64%),
        radial-gradient(1200px 900px at 82% 10%,
          color-mix(in srgb, var(--cool-1) 24%, transparent) 0%,
          transparent 66%),
        var(--neutral-0);
    }
  }
}

/* --------------------------------------------
   3) Base
-------------------------------------------- */
@layer base {
  html {
    font-size: 16px;
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }

  body {
    position: relative;
    isolation: isolate;
    background: var(--neutral-0);
    color: var(--text-1);
    font-family: var(--font-sans);
    font-size: var(--fs-2);
    line-height: var(--lh-normal);
    font-kerning: normal;
  }

  /* Aurora backdrop */
  body::before {
    content: "";
    position: fixed;
    inset: 0;
    z-index: -2;
    pointer-events: none;
    background: var(--bg-aurora);
    filter: saturate(1.1) brightness(0.95) contrast(1.04);
  }

  /* Grain overlay */
  body::after {
    content: "";
    position: fixed;
    inset: 0;
    z-index: -1;
    pointer-events: none;
    background: var(--grain);
    opacity: 0.06;
    mix-blend-mode: overlay;
  }

  @media (prefers-reduced-motion: no-preference) {
    html:focus-within { scroll-behavior: smooth; }
  }

  :where(h1) { font-size: var(--fs-5); line-height: var(--lh-tight); letter-spacing: -0.03em; }
  :where(h2) { font-size: var(--fs-4); line-height: var(--lh-tight); letter-spacing: -0.02em; }
  :where(h3) { font-size: var(--fs-3); line-height: var(--lh-tight); letter-spacing: -0.01em; }
  :where(p) { max-inline-size: 70ch; }

  :where(code, pre, kbd, samp) {
    font-family: var(--font-mono);
    font-size: 0.95em;
  }

  :where(pre) {
    padding: var(--space-4);
    border-radius: var(--radius-control);
    background: color-mix(in srgb, var(--glass-bg) 80%, transparent);
    border: var(--border-1) solid var(--stroke-2);
    overflow: auto;
  }

  :where(a[href]) {
    text-decoration: none;
    text-underline-offset: 0.18em;
    text-decoration-thickness: 0.08em;
  }
  :where(a[href]:hover),
  :where(a[href]:focus-visible) { text-decoration: underline; }

  :where(:focus-visible) {
    outline: var(--ring-size) solid var(--focus-ring);
    outline-offset: var(--ring-offset);
  }

  @supports not selector(:focus-visible) {
    :where(:focus) {
      outline: var(--ring-size) solid var(--focus-ring);
      outline-offset: var(--ring-offset);
    }
  }

  :where(button, [role="button"], input, select, textarea) { touch-action: manipulation; }

  ::selection { background: color-mix(in srgb, var(--hot-1) 30%, transparent); }

  @media (prefers-reduced-motion: reduce) {
    html:focus-within { scroll-behavior: auto; }
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  :root { scrollbar-gutter: stable; }
}

/* --------------------------------------------
   4) Layout
-------------------------------------------- */
@layer layout {
  .container {
    inline-size: min(100% - (var(--gutter) * 2), var(--container-max));
    margin-inline: auto;
  }

  .stack { display: grid; gap: var(--space-4); }
  .cluster { display: flex; flex-wrap: wrap; gap: var(--space-3); align-items: center; }
  .cluster--between { justify-content: space-between; inline-size: 100%; }
  .grid { display: grid; gap: var(--space-4); }

  .virtual-list {
    content-visibility: auto;
    contain: content;
    contain-intrinsic-size: 1px 800px;
  }
}

/* --------------------------------------------
   5) Motion (keep minimal here)
-------------------------------------------- */
@layer motion {
  @supports (view-transition-name: vt-hero) {
    .vt-hero { view-transition-name: vt-hero; }
  }
}

/* --------------------------------------------
   6) Utilities
-------------------------------------------- */
@layer utilities {
  .sr-only {
    position: absolute;
    inline-size: 1px;
    block-size: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0 0 0 0);
    clip-path: inset(50%);
    white-space: nowrap;
    border: 0;
  }

  .flow > * + * { margin-block-start: var(--space-4); }

  .muted { color: var(--text-2); }
  .mono { font-family: var(--font-mono); }

  .tabular-nums {
    font-variant-numeric: tabular-nums;
    font-feature-settings: "tnum";
  }

  .center { display: grid; place-items: center; }

  .truncate { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
  .nowrap { white-space: nowrap; }

  .p-4 { padding: var(--space-4); }
  .p-5 { padding: var(--space-5); }
  .px-4 { padding-inline: var(--space-4); }
  .py-3 { padding-block: var(--space-3); }
  .gap-3 { gap: var(--space-3); }
  .gap-4 { gap: var(--space-4); }

  .switcher {
    container-type: inline-size;
    display: grid;
    gap: var(--space-4);
  }
  @container (min-width: 42rem) {
    .switcher { grid-template-columns: 1fr 1fr; align-items: start; }
  }
}

@layer overrides {}
