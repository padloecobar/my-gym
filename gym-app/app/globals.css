/* globals.css (Aurora Glass - Dark-first)
   Goal: match reference look: deep aurora background + dark glass panels + gradient edges + soft shapes
*/

@layer reset, tokens, base, layout, components, motion, utilities, overrides;

/* --------------------------------------------
   1) Reset
-------------------------------------------- */
@layer reset {
  *,
  *::before,
  *::after { box-sizing: border-box; }

  body {
    margin: 0;
    min-block-size: 100dvh;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  img, picture, video, canvas, svg {
    display: block;
    max-inline-size: 100%;
    block-size: auto;
  }

  input, button, textarea, select {
    font: inherit;
    color: inherit;
  }

  button { cursor: pointer; }

  :where(ul, ol) { padding: 0; margin: 0; list-style: none; }
  :where(h1, h2, h3, h4, h5, h6, p, figure, blockquote) { margin: 0; }
  :where(a) { color: inherit; text-decoration: none; }
  :where(table) { border-collapse: collapse; border-spacing: 0; }
  :where(:target) { scroll-margin-block: 6rem; }
}

/* --------------------------------------------
   2) Tokens (dark-first aurora + glass)
-------------------------------------------- */
@layer tokens {
  :root {
    color-scheme: dark;

    /* Typography */
    --font-sans: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial,
      "Apple Color Emoji", "Segoe UI Emoji";
    --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
      "Courier New", monospace;

    /* Type */
    --fs-1: clamp(0.875rem, 0.84rem + 0.2vw, 0.95rem);
    --fs-2: clamp(1rem, 0.95rem + 0.35vw, 1.125rem);
    --fs-3: clamp(1.125rem, 1.05rem + 0.55vw, 1.35rem);
    --fs-4: clamp(1.35rem, 1.2rem + 1vw, 1.9rem);
    --fs-5: clamp(1.7rem, 1.4rem + 1.7vw, 2.6rem);
    --lh-tight: 1.15;
    --lh-normal: 1.5;
    --lh-relaxed: 1.7;

    /* Spacing */
    --space-0: 0;
    --space-1: 0.25rem;
    --space-2: 0.5rem;
    --space-3: 0.75rem;
    --space-4: 1rem;
    --space-5: 1.25rem;
    --space-6: 1.5rem;
    --space-7: 2rem;
    --space-8: 2.5rem;
    --space-9: 3rem;

    /* Shapes (reference is “soft + big”) */
    --r-1: 0.5rem;
    --r-2: 0.875rem;
    --r-3: 1.25rem;
    --r-pill: 999px;
    --radius-card: 1.5rem;      /* 24px */
    --radius-control: var(--r-3);
    --radius-pill: var(--r-pill);

    /* Borders */
    --border-1: 1px;

    /* Motion */
    --dur-press: 120ms;
    --dur-quick: 180ms;
    --dur-enter: 225ms;
    --dur-exit: 195ms;
    --dur-page: 300ms;
    --dur-page-lg: 375ms;

    --dur-1: 120ms;
    --dur-2: 200ms;
    --dur-3: 320ms;

    --ease-standard: cubic-bezier(0.4, 0.0, 0.2, 1);
    --ease-decel: cubic-bezier(0.0, 0.0, 0.2, 1);
    --ease-accel: cubic-bezier(0.4, 0.0, 1, 1);
    --ease-sharp: cubic-bezier(0.4, 0.0, 0.6, 1);

    --ease-1: cubic-bezier(0.2, 0.8, 0.2, 1);
    --ease-2: cubic-bezier(0.2, 0.0, 0.0, 1);

    /* Touch */
    --tap: 48px;

    /* Layout */
    --container-max: 72rem;
    --gutter: clamp(1rem, 2vw, 1.5rem);

    /* ----------------------------
       Dark primitives (OKLCH)
       Night-gym navy + aurora accents
    ---------------------------- */
    --neutral-0: oklch(0.12 0.035 265); /* page base */
    --neutral-1: oklch(0.16 0.038 265); /* deep surface */
    --neutral-2: oklch(0.21 0.042 265); /* raised glass */
    --neutral-3: oklch(0.29 0.045 265); /* subtle separation */

    --text-ink: oklch(0.96 0.02 270);
    --text-muted: oklch(0.78 0.03 270);

    /* Aurora accents */
    --brand-1: oklch(0.76 0.21 25);  /* coral glow */
    --brand-2: oklch(0.72 0.20 330); /* magenta/violet */
    --brand-3: oklch(0.72 0.16 255); /* blue edge */

    --accent-1: var(--brand-1);
    --accent-2: var(--brand-2);

    --danger-1: oklch(0.72 0.21 25);
    --success-1: oklch(0.78 0.15 145);
    --warning-1: oklch(0.88 0.15 85);

    /* ----------------------------
       Semantic tokens
    ---------------------------- */
    --surface-0: var(--neutral-0);
    --surface-1: color-mix(in srgb, var(--neutral-1) 76%, transparent);
    --surface-2: color-mix(in srgb, var(--neutral-2) 82%, transparent);
    --surface-3: color-mix(in srgb, var(--neutral-2) 90%, transparent);

    --text-1: var(--text-ink);
    --text-2: var(--text-muted);
    --text-3: color-mix(in srgb, var(--text-2) 68%, var(--neutral-0));

    /* Border strokes for glass */
    --stroke-1: color-mix(in srgb, white 14%, transparent);
    --stroke-2: color-mix(in srgb, white 22%, transparent);
    --stroke-inner: var(--stroke-1);
    --stroke-outer: var(--stroke-2);

    --focus-ring: color-mix(in srgb, var(--accent-1) 85%, white);
    --on-brand: oklch(0.985 0.010 285);

    --scrim: color-mix(in srgb, black 64%, transparent);

    /* Elevation */
    --shadow-color: color-mix(in srgb, black 62%, transparent);
    --shadow-1: 0 1px 2px var(--shadow-color);
    --shadow-2: 0 14px 50px var(--shadow-color);
    --shadow-3: 0 26px 90px var(--shadow-color);

    /* Glow */
    --glow-brand: 0 18px 60px color-mix(in srgb, var(--accent-1) 42%, transparent);
    --glow-pink: 0 20px 70px color-mix(in srgb, var(--accent-2) 34%, transparent);
    --glow-blue: 0 20px 70px color-mix(in srgb, var(--brand-3) 30%, transparent);

    /* Compatibility aliases */
    --bg: var(--surface-0);
    --surface: var(--surface-1);
    --text: var(--text-1);
    --muted: var(--text-2);
    --border: var(--stroke-1);
    --border-soft: var(--stroke-2);
    --ring: var(--focus-ring);

    --brand: var(--accent-1);
    --success: var(--success-1);
    --warning: var(--warning-1);
    --danger: var(--danger-1);

    --brand-soft: color-mix(in srgb, var(--accent-1) 18%, transparent);

    /* Vibe */
    --bg-aurora:
      radial-gradient(1200px 900px at 12% -10%,
        color-mix(in srgb, var(--brand-3) 62%, transparent) 0%,
        transparent 65%),
      radial-gradient(1100px 850px at 52% 0%,
        color-mix(in srgb, var(--brand-2) 70%, transparent) 0%,
        transparent 62%),
      radial-gradient(1000px 800px at 86% 12%,
        color-mix(in srgb, var(--brand-1) 68%, transparent) 0%,
        transparent 60%),
      radial-gradient(1200px 900px at 55% 120%,
        color-mix(in srgb, var(--brand-3) 30%, transparent) 0%,
        transparent 68%),
      var(--neutral-0);

    --glass-soft: color-mix(in srgb, var(--neutral-1) 56%, transparent);
    --glass-mid: color-mix(in srgb, var(--neutral-1) 72%, transparent);
    --glass-strong: color-mix(in srgb, var(--neutral-1) 86%, transparent);
    --glass-1: var(--glass-mid);
    --glass-2: color-mix(in srgb, var(--neutral-2) 80%, transparent);
    --glass-3: var(--glass-soft);

    --glass-bg: var(--glass-mid);
    --glass-stroke: var(--stroke-inner);
    --glass-stroke-strong: var(--stroke-outer);
    --glass-blur: 20px;
    --glass-blur-soft: 16px;
    --glass-blur-strong: 22px;

    --accent-gradient: linear-gradient(135deg,
      color-mix(in srgb, var(--accent-1) 90%, transparent),
      color-mix(in srgb, var(--accent-2) 92%, transparent)
    );

    --accent-edge: linear-gradient(135deg,
      color-mix(in srgb, white 22%, transparent),
      color-mix(in srgb, var(--accent-2) 60%, transparent)
    );

    --edge-gradient: linear-gradient(135deg,
      color-mix(in srgb, var(--brand-3) 42%, transparent),
      color-mix(in srgb, var(--brand-2) 42%, transparent),
      color-mix(in srgb, var(--brand-1) 42%, transparent)
    );

    --edge-gradient-soft: linear-gradient(135deg,
      color-mix(in srgb, var(--brand-3) 18%, transparent),
      color-mix(in srgb, var(--brand-2) 18%, transparent),
      color-mix(in srgb, var(--brand-1) 18%, transparent)
    );

    /* Subtle grain */
    --grain:
      repeating-linear-gradient(0deg,
        color-mix(in srgb, white 2%, transparent) 0px,
        transparent 2px,
        transparent 6px
      );

    --ring-size: 3px;
    --ring-offset: 2px;

    /* legacy highlight */
    --accent-hsl: 18 90% 65%;
  }

  /* Optional LIGHT theme, only if you explicitly set <html data-theme="light"> */
  :root[data-theme="light"] {
    color-scheme: light;

    --neutral-0: oklch(0.985 0.010 285);
    --neutral-1: oklch(0.965 0.012 285);
    --neutral-2: oklch(0.940 0.016 285);
    --neutral-3: oklch(0.860 0.018 285);

    --text-ink: oklch(0.220 0.020 285);
    --text-muted: oklch(0.520 0.020 285);

    --stroke-1: color-mix(in srgb, black 10%, transparent);
    --stroke-2: color-mix(in srgb, black 16%, transparent);
    --stroke-inner: var(--stroke-1);
    --stroke-outer: var(--stroke-2);

    --scrim: color-mix(in srgb, black 30%, transparent);
    --shadow-color: color-mix(in srgb, black 18%, transparent);

    --glass-soft: color-mix(in srgb, white 70%, transparent);
    --glass-mid: color-mix(in srgb, white 82%, transparent);
    --glass-strong: color-mix(in srgb, white 90%, transparent);
    --glass-1: var(--glass-mid);
    --glass-2: color-mix(in srgb, white 88%, transparent);
    --glass-3: var(--glass-soft);

    --glass-bg: var(--glass-mid);
    --glass-stroke: var(--stroke-inner);
    --glass-stroke-strong: var(--stroke-outer);

    --bg-aurora:
      radial-gradient(1100px 800px at 18% -10%,
        color-mix(in srgb, var(--brand-3) 28%, transparent) 0%,
        transparent 60%),
      radial-gradient(1200px 900px at 52% 0%,
        color-mix(in srgb, var(--brand-1) 32%, transparent) 0%,
        transparent 62%),
      radial-gradient(1200px 900px at 92% 10%,
        color-mix(in srgb, var(--brand-2) 26%, transparent) 0%,
        transparent 62%),
      var(--neutral-0);
  }

  /* OKLCH fallback */
  @supports not (color: oklch(62% 0.18 250)) {
    :root {
      --neutral-0: hsl(252 32% 7%);
      --neutral-1: hsl(252 28% 11%);
      --neutral-2: hsl(252 26% 16%);
      --neutral-3: hsl(252 22% 24%);

      --text-ink: hsl(250 20% 96%);
      --text-muted: hsl(250 10% 78%);

      --brand-1: hsl(18 90% 68%);
      --brand-2: hsl(330 85% 70%);
      --brand-3: hsl(245 90% 70%);

      --accent-1: var(--brand-1);
      --accent-2: var(--brand-2);

      --stroke-1: color-mix(in srgb, white 14%, transparent);
      --stroke-2: color-mix(in srgb, white 22%, transparent);

      --scrim: color-mix(in srgb, black 64%, transparent);
      --shadow-color: color-mix(in srgb, black 62%, transparent);

      --bg-aurora:
        radial-gradient(1200px 900px at 12% -10%,
          color-mix(in srgb, var(--brand-3) 62%, transparent) 0%,
          transparent 65%),
        radial-gradient(1100px 850px at 52% 0%,
          color-mix(in srgb, var(--brand-2) 70%, transparent) 0%,
          transparent 62%),
        radial-gradient(1000px 800px at 86% 12%,
          color-mix(in srgb, var(--brand-1) 68%, transparent) 0%,
          transparent 60%),
        radial-gradient(1200px 900px at 55% 120%,
          color-mix(in srgb, var(--brand-3) 30%, transparent) 0%,
          transparent 68%),
        var(--neutral-0);
    }
  }
}

/* --------------------------------------------
   3) Base
-------------------------------------------- */
@layer base {
  html {
    font-size: 16px;
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }

  body {
    position: relative;
    isolation: isolate;
    background: var(--neutral-0);
    color: var(--text-1);
    font-family: var(--font-sans);
    font-size: var(--fs-2);
    line-height: var(--lh-normal);
    font-kerning: normal;
  }

  /* Aurora backdrop */
  body::before {
    content: "";
    position: fixed;
    inset: 0;
    z-index: -2;
    pointer-events: none;
    background: var(--bg-aurora);
    filter: saturate(1.1) brightness(0.95) contrast(1.04);
  }

  /* Grain overlay */
  body::after {
    content: "";
    position: fixed;
    inset: 0;
    z-index: -1;
    pointer-events: none;
    background: var(--grain);
    opacity: 0.06;
    mix-blend-mode: overlay;
  }

  @media (prefers-reduced-motion: no-preference) {
    html:focus-within { scroll-behavior: smooth; }
  }

  :where(h1) { font-size: var(--fs-5); line-height: var(--lh-tight); letter-spacing: -0.03em; }
  :where(h2) { font-size: var(--fs-4); line-height: var(--lh-tight); letter-spacing: -0.02em; }
  :where(h3) { font-size: var(--fs-3); line-height: var(--lh-tight); letter-spacing: -0.01em; }
  :where(p) { max-inline-size: 70ch; }

  :where(code, pre, kbd, samp) {
    font-family: var(--font-mono);
    font-size: 0.95em;
  }

  :where(pre) {
    padding: var(--space-4);
    border-radius: var(--radius-control);
    background: color-mix(in srgb, var(--glass-bg) 80%, transparent);
    border: var(--border-1) solid var(--stroke-2);
    overflow: auto;
  }

  :where(a[href]) {
    text-decoration: none;
    text-underline-offset: 0.18em;
    text-decoration-thickness: 0.08em;
  }
  :where(a[href]:hover),
  :where(a[href]:focus-visible) { text-decoration: underline; }

  :where(:focus-visible) {
    outline: var(--ring-size) solid var(--focus-ring);
    outline-offset: var(--ring-offset);
  }

  @supports not selector(:focus-visible) {
    :where(:focus) {
      outline: var(--ring-size) solid var(--focus-ring);
      outline-offset: var(--ring-offset);
    }
  }

  :where(button, [role="button"], input, select, textarea) { touch-action: manipulation; }

  ::selection { background: color-mix(in srgb, var(--brand-1) 30%, transparent); }

  @media (prefers-reduced-motion: reduce) {
    html:focus-within { scroll-behavior: auto; }
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  :root { scrollbar-gutter: stable; }
}

/* --------------------------------------------
   4) Layout
-------------------------------------------- */
@layer layout {
  .container {
    inline-size: min(100% - (var(--gutter) * 2), var(--container-max));
    margin-inline: auto;
  }

  .stack { display: grid; gap: var(--space-4); }
  .cluster { display: flex; flex-wrap: wrap; gap: var(--space-3); align-items: center; }
  .cluster--between { justify-content: space-between; inline-size: 100%; }
  .grid { display: grid; gap: var(--space-4); }

  .virtual-list {
    content-visibility: auto;
    contain: content;
    contain-intrinsic-size: 1px 800px;
  }
}

/* --------------------------------------------
   5) Components (glass + gradient edges)
-------------------------------------------- */
@layer components {
  /* Buttons: canonical .button, .btn is alias */
  :where(.button, .btn) {
    --_shadow: var(--shadow-1);

    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);

    padding-inline: var(--space-4);
    padding-block: var(--space-2);

    min-block-size: var(--_height, var(--tap, 48px));
    border-radius: var(--radius-pill);
    border: var(--border-1) solid var(--glass-stroke);

    background: var(--glass-3);

    color: var(--text-1);
    font-weight: 600;
    letter-spacing: -0.01em;

    box-shadow: var(--_shadow);
    transition:
      transform var(--dur-press) var(--ease-standard),
      filter var(--dur-press) var(--ease-standard),
      box-shadow var(--dur-quick) var(--ease-standard);
  }

  @supports (backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px)) {
    :where(.button, .btn) {
      backdrop-filter: blur(var(--glass-blur-soft));
      -webkit-backdrop-filter: blur(var(--glass-blur-soft));
    }
  }

  :where(.button, .btn):hover:not(:disabled):not([aria-disabled="true"]) {
    filter: brightness(1.04);
    box-shadow: var(--shadow-2);
  }
  :where(.button, .btn):active:not(:disabled):not([aria-disabled="true"]) {
    transform: translateY(1px) scale(0.99);
    filter: brightness(0.98);
  }

  :where(.button, .btn):disabled,
  :where(.button, .btn)[aria-disabled="true"] {
    opacity: 0.55;
    cursor: not-allowed;
    pointer-events: none;
    box-shadow: none;
  }

  /* Variants */
  :where(.button--primary, .btn--primary) {
    background: var(--accent-gradient);
    border-color: color-mix(in srgb, var(--accent-1) 38%, transparent);
    color: var(--on-brand);
    box-shadow: var(--glow-brand), var(--shadow-2);
  }

  :where(.button--secondary, .btn--secondary) {
    background: var(--glass-2);
    border-color: var(--glass-stroke);
  }

  :where(.button--ghost, .btn--ghost) {
    background: transparent;
    border: var(--border-1) solid transparent;
    color: var(--text-2);
    box-shadow: none;
  }

  :where(.button--ghost, .btn--ghost):hover:not(:disabled):not([aria-disabled="true"]) {
    background: color-mix(in srgb, var(--glass-2) 30%, transparent);
    color: var(--text-1);
    filter: none;
    box-shadow: none;
  }

  :where(.button--danger, .btn--danger) {
    background: color-mix(in srgb, var(--danger-1) 18%, transparent);
    border-color: color-mix(in srgb, var(--danger-1) 38%, transparent);
    color: color-mix(in srgb, var(--danger-1) 88%, white);
    box-shadow: none;
  }

  /* Sizes */
  :where(.button--sm, .btn--sm) { --_height: 40px; padding-inline: var(--space-3); font-size: var(--fs-1); }
  :where(.button--md, .btn--md) { --_height: 48px; padding-inline: var(--space-4); font-size: var(--fs-2); }
  :where(.button--lg, .btn--lg) { --_height: 56px; padding-inline: var(--space-5); font-size: var(--fs-3); }

  /* Segmented control */
  .segmented {
    display: inline-flex;
    gap: var(--space-1);
    padding: var(--space-1);
    border-radius: var(--radius-pill);
    border: var(--border-1) solid var(--glass-stroke);
    background: var(--glass-2);
    box-shadow: var(--shadow-1);
  }

  @supports (backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px)) {
    .segmented { backdrop-filter: blur(var(--glass-blur-soft)); -webkit-backdrop-filter: blur(var(--glass-blur-soft)); }
  }

  .segmented > :where(.button, .btn) {
    background: transparent;
    border: var(--border-1) solid transparent;
    box-shadow: none;
    color: var(--text-2);
    padding-inline: var(--space-3);
    border-radius: var(--radius-pill);
    min-block-size: 40px;
  }

  .segmented > :where(.button--primary, .btn--primary) {
    background: var(--accent-gradient);
    border-color: color-mix(in srgb, var(--accent-1) 38%, transparent);
    color: var(--on-brand);
    box-shadow: var(--glow-brand);
  }

  /* Card (key: dark glass, not pastel) */
  .card {
    container-type: inline-size;
    position: relative;
    border-radius: var(--radius-card);
    border: var(--border-1) solid var(--stroke-outer);
    background: var(--glass-1);

    box-shadow: var(--shadow-2);
    overflow: clip;
  }

  @supports (backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px)) {
    .card {
      backdrop-filter: blur(var(--glass-blur));
      -webkit-backdrop-filter: blur(var(--glass-blur));
    }
  }

  .card__body { position: relative; padding: var(--space-5); display: grid; gap: var(--space-3); }
  .card__title {
    font-size: var(--fs-2);
    font-weight: 650;
    line-height: var(--lh-tight);
    letter-spacing: -0.01em;
  }
  .card__meta { color: var(--text-2); font-size: var(--fs-1); }

  .page-title {
    font-size: var(--fs-5);
    font-weight: 720;
    line-height: var(--lh-tight);
    letter-spacing: -0.03em;
  }

  .section-title {
    font-size: var(--fs-3);
    font-weight: 680;
    line-height: var(--lh-tight);
    letter-spacing: -0.02em;
  }

  @container (min-width: 34rem) {
    .card__body { padding: calc(var(--space-5) * 1.15); gap: var(--space-4); }
  }

  /* Fields */
  .field { display: grid; gap: var(--space-2); }
  .label { font-size: var(--fs-1); color: var(--text-2); }

  .input,
  .select,
  .textarea {
    inline-size: 100%;
    padding-inline: var(--space-3);
    padding-block: var(--space-2);
    border-radius: var(--radius-pill);
    border: var(--border-1) solid var(--stroke-inner);
    background: var(--glass-2);
    color: var(--text-1);
    transition: filter var(--dur-quick) var(--ease-standard), box-shadow var(--dur-quick) var(--ease-standard);
  }

  @supports (backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px)) {
    .input, .select, .textarea {
      backdrop-filter: blur(var(--glass-blur-soft));
      -webkit-backdrop-filter: blur(var(--glass-blur-soft));
    }
  }

  .textarea {
    min-block-size: 10lh;
    resize: vertical;
    border-radius: var(--radius-card);
    padding-block: var(--space-3);
    line-height: var(--lh-relaxed);
  }

  .input:focus-visible,
  .select:focus-visible,
  .textarea:focus-visible {
    outline: none;
    box-shadow:
      0 0 0 var(--ring-size) color-mix(in srgb, var(--focus-ring) 28%, transparent),
      var(--shadow-1);
    filter: brightness(1.05);
  }

  .help { font-size: var(--fs-1); color: var(--text-2); }
  .error { color: color-mix(in srgb, var(--danger-1) 88%, white); font-size: var(--fs-1); }

  /* Badge */
  .badge {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    padding-inline: var(--space-2);
    padding-block: var(--space-1);
    border-radius: var(--radius-pill);
    border: var(--border-1) solid var(--stroke-inner);
    background: color-mix(in srgb, var(--glass-3) 85%, transparent);
    font-size: var(--fs-1);
    color: var(--text-2);
    white-space: nowrap;
  }

  .badge--brand {
    color: var(--on-brand);
    background: var(--accent-gradient);
    border: var(--border-1) solid color-mix(in srgb, var(--accent-1) 35%, transparent);
    box-shadow: var(--glow-brand);
  }

  @supports (backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px)) {
    .badge {
      backdrop-filter: blur(var(--glass-blur-soft));
      -webkit-backdrop-filter: blur(var(--glass-blur-soft));
    }
  }

  /* Dialog */
  .dialog {
    border-radius: var(--radius-card);
    border: var(--border-1) solid var(--stroke-outer);
    background: var(--glass-strong);
    box-shadow: var(--shadow-3);
    overflow: clip;
  }

  @supports (backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px)) {
    .dialog { backdrop-filter: blur(var(--glass-blur-strong)); -webkit-backdrop-filter: blur(var(--glass-blur-strong)); }
  }

  .dialog__body { padding: var(--space-5); }
  .dialog__footer {
    padding: var(--space-4);
    border-top: var(--border-1) solid var(--stroke-inner);
    display: flex;
    justify-content: flex-end;
    gap: var(--space-3);
  }
}

/* --------------------------------------------
   6) Motion (keep minimal here)
-------------------------------------------- */
@layer motion {
  @supports (view-transition-name: vt-hero) {
    .vt-hero { view-transition-name: vt-hero; }
  }
}

/* --------------------------------------------
   7) Utilities
-------------------------------------------- */
@layer utilities {
  .sr-only {
    position: absolute;
    inline-size: 1px;
    block-size: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0 0 0 0);
    clip-path: inset(50%);
    white-space: nowrap;
    border: 0;
  }

  .flow > * + * { margin-block-start: var(--space-4); }

  .muted { color: var(--text-2); }
  .mono { font-family: var(--font-mono); }

  .tabular-nums {
    font-variant-numeric: tabular-nums;
    font-feature-settings: "tnum";
  }

  .center { display: grid; place-items: center; }

  .truncate { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
  .nowrap { white-space: nowrap; }

  .p-4 { padding: var(--space-4); }
  .p-5 { padding: var(--space-5); }
  .px-4 { padding-inline: var(--space-4); }
  .py-3 { padding-block: var(--space-3); }
  .gap-3 { gap: var(--space-3); }
  .gap-4 { gap: var(--space-4); }

  .switcher {
    container-type: inline-size;
    display: grid;
    gap: var(--space-4);
  }
  @container (min-width: 42rem) {
    .switcher { grid-template-columns: 1fr 1fr; align-items: start; }
  }
}

@layer overrides {}
