/* globals.css (Mango Voltage Liquid Glass - Dark-first)
   Goal: aurora world + dark translucent glass + warm signal accents
*/

@layer reset, tokens, base, layout, components, motion, utilities, overrides;

/* --------------------------------------------
   1) Reset
-------------------------------------------- */
@layer reset {
  *,
  *::before,
  *::after { box-sizing: border-box; }

  body {
    margin: 0;
    min-block-size: 100dvh;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  img, picture, video, canvas, svg {
    display: block;
    max-inline-size: 100%;
    block-size: auto;
  }

  input, button, textarea, select {
    font: inherit;
    color: inherit;
  }

  button { cursor: pointer; }

  :where(ul, ol) { padding: 0; margin: 0; list-style: none; }
  :where(h1, h2, h3, h4, h5, h6, p, figure, blockquote) { margin: 0; }
  :where(a) { color: inherit; text-decoration: none; }
  :where(table) { border-collapse: collapse; border-spacing: 0; }
  :where(:target) { scroll-margin-block: 6rem; }
}

/* --------------------------------------------
   2) Tokens (dark-first aurora glass)
-------------------------------------------- */
@layer tokens {
  :root {
    color-scheme: dark;

    /* Typography */
    --font-sans: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial,
      "Apple Color Emoji", "Segoe UI Emoji";
    --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
      "Courier New", monospace;

    /* Type */
    --fs-1: clamp(0.875rem, 0.84rem + 0.2vw, 0.95rem);
    --fs-2: clamp(1rem, 0.95rem + 0.35vw, 1.125rem);
    --fs-3: clamp(1.125rem, 1.05rem + 0.55vw, 1.35rem);
    --fs-4: clamp(1.35rem, 1.2rem + 1vw, 1.9rem);
    --fs-5: clamp(1.7rem, 1.4rem + 1.7vw, 2.6rem);
    --lh-tight: 1.15;
    --lh-normal: 1.5;
    --lh-relaxed: 1.7;

    /* Spacing */
    --space-0: 0;
    --space-1: 0.25rem;
    --space-2: 0.5rem;
    --space-3: 0.75rem;
    --space-4: 1rem;
    --space-5: 1.25rem;
    --space-6: 1.5rem;
    --space-7: 2rem;
    --space-8: 2.5rem;
    --space-9: 3rem;

    /* Shapes (reference is “soft + big”) */
    --r-1: 0.5rem;
    --r-2: 0.875rem;
    --r-3: 1.25rem;
    --r-pill: 999px;
    --radius-card: 1.5rem;      /* 24px */
    --radius-control: var(--r-3);
    --radius-pill: var(--r-pill);

    /* Borders */
    --border-1: 1px;

    /* Motion */
    --dur-press: 120ms;
    --dur-quick: 180ms;
    --dur-enter: 225ms;
    --dur-exit: 195ms;
    --dur-page: 300ms;
    --dur-page-lg: 375ms;

    --dur-1: 120ms;
    --dur-2: 200ms;
    --dur-3: 320ms;

    --ease-standard: cubic-bezier(0.4, 0.0, 0.2, 1);
    --ease-decel: cubic-bezier(0.0, 0.0, 0.2, 1);
    --ease-accel: cubic-bezier(0.4, 0.0, 1, 1);
    --ease-sharp: cubic-bezier(0.4, 0.0, 0.6, 1);

    --ease-1: cubic-bezier(0.2, 0.8, 0.2, 1);
    --ease-2: cubic-bezier(0.2, 0.0, 0.0, 1);

    /* Touch */
    --tap: 48px;

    /* Layout */
    --container-max: 72rem;
    --gutter: clamp(1rem, 2vw, 1.5rem);

    /* ----------------------------
       Mango Voltage Liquid Glass (dark)
    ---------------------------- */
    --neutral-0: oklch(0.10 0.035 260); /* page base */
    --neutral-1: oklch(0.14 0.040 260); /* deep surface */
    --neutral-2: oklch(0.18 0.045 260); /* raised glass */
    --neutral-3: oklch(0.24 0.050 260); /* subtle separation */

    /* Brand palette */
    --hot-1: #FFB300; /* mango gold */
    --hot-2: #FF4D6D; /* coral heat */
    --cool-1: #3D7BFF; /* arctic blue */
    --cool-2: #42FFD2; /* mint glow */

    --accent-1: var(--hot-1);
    --accent-2: var(--hot-2);
    --accent-cool-1: var(--cool-1);
    --accent-cool-2: var(--cool-2);

    --danger-1: color-mix(in srgb, var(--hot-2) 90%, white);
    --success-1: color-mix(in srgb, var(--cool-2) 70%, white);
    --warning-1: color-mix(in srgb, var(--hot-1) 85%, white);

    /* ----------------------------
       Semantic tokens
    ---------------------------- */
    --surface-0: var(--neutral-0);
    --surface-1: color-mix(in srgb, var(--neutral-1) 82%, transparent);
    --surface-2: color-mix(in srgb, var(--neutral-2) 78%, transparent);
    --surface-3: color-mix(in srgb, var(--neutral-2) 88%, transparent);

    --text-1: color-mix(in srgb, white 92%, var(--cool-1) 8%);
    --text-2: color-mix(in srgb, white 70%, var(--cool-1) 10%);
    --text-3: color-mix(in srgb, var(--text-2) 80%, var(--surface-0));
    --placeholder: color-mix(in srgb, var(--text-2) 75%, var(--surface-0));
    --text-shadow: 0 2px 12px color-mix(in srgb, black 55%, transparent);

    --text-ink: var(--text-1);
    --text-muted: var(--text-2);

    /* Border strokes for glass */
    --stroke-1: color-mix(in srgb, white 12%, transparent);
    --stroke-2: color-mix(in srgb, white 20%, transparent);
    --stroke-inner: var(--stroke-1);
    --stroke-outer: var(--stroke-2);

    --focus-ring: color-mix(in srgb, var(--cool-1) 70%, var(--cool-2));
    --on-brand: color-mix(in srgb, black 88%, var(--neutral-0));

    --scrim: color-mix(in srgb, black 58%, transparent);

    /* Surface accents */
    --surface-highlight: color-mix(in srgb, white 14%, transparent);
    --surface-noise:
      repeating-linear-gradient(0deg,
        color-mix(in srgb, white 3%, transparent) 0px,
        transparent 2px,
        transparent 4px
      );
    --surface-noise-opacity: 0.04;

    /* Elevation */
    --shadow-color: color-mix(in srgb, black 66%, transparent);
    --shadow-1: 0 1px 2px var(--shadow-color);
    --shadow-2: 0 16px 50px var(--shadow-color);
    --shadow-3: 0 28px 90px var(--shadow-color);

    /* Glow */
    --glow-hot: 0 18px 50px color-mix(in srgb, var(--hot-1) 35%, transparent);
    --glow-cool: 0 18px 50px color-mix(in srgb, var(--cool-1) 35%, transparent);

    /* Compatibility aliases */
    --bg: var(--surface-0);
    --surface: var(--surface-1);
    --text: var(--text-1);
    --muted: var(--text-2);
    --border: var(--stroke-1);
    --border-soft: var(--stroke-2);
    --ring: var(--focus-ring);

    --brand: var(--hot-1);
    --success: var(--success-1);
    --warning: var(--warning-1);
    --danger: var(--danger-1);

    --brand-soft: color-mix(in srgb, var(--hot-1) 18%, transparent);
    --glow-brand: var(--glow-hot);

    /* Vibe */
    --bg-aurora:
      radial-gradient(1200px 900px at 14% -10%,
        color-mix(in srgb, var(--cool-1) 28%, transparent) 0%,
        transparent 62%),
      radial-gradient(1000px 800px at 78% 8%,
        color-mix(in srgb, var(--hot-1) 24%, transparent) 0%,
        transparent 62%),
      radial-gradient(1100px 900px at 58% 120%,
        color-mix(in srgb, var(--cool-2) 20%, transparent) 0%,
        transparent 66%),
      radial-gradient(1200px 900px at 30% 110%,
        color-mix(in srgb, var(--hot-2) 18%, transparent) 0%,
        transparent 68%),
      var(--neutral-0);

    --glass-soft: color-mix(in srgb, var(--neutral-1) 60%, transparent);
    --glass-mid: color-mix(in srgb, var(--neutral-1) 78%, transparent);
    --glass-strong: color-mix(in srgb, var(--neutral-1) 92%, transparent);
    --glass-1: var(--surface-1);
    --glass-2: var(--surface-2);
    --glass-3: color-mix(in srgb, var(--neutral-1) 68%, transparent);

    --glass-bg: var(--glass-mid);
    --glass-stroke: var(--stroke-inner);
    --glass-stroke-strong: var(--stroke-outer);
    --glass-blur: 20px;
    --glass-blur-soft: 16px;
    --glass-blur-strong: 22px;

    --accent-gradient: linear-gradient(135deg,
      color-mix(in srgb, var(--hot-1) 70%, transparent),
      color-mix(in srgb, var(--hot-2) 75%, transparent)
    );

    --accent-edge: linear-gradient(135deg,
      color-mix(in srgb, var(--hot-1) 40%, transparent),
      color-mix(in srgb, var(--hot-2) 40%, transparent)
    );

    --edge-gradient: linear-gradient(135deg,
      color-mix(in srgb, var(--cool-1) 28%, transparent),
      color-mix(in srgb, var(--cool-2) 24%, transparent),
      color-mix(in srgb, var(--hot-1) 24%, transparent)
    );

    --edge-gradient-soft: linear-gradient(135deg,
      color-mix(in srgb, var(--cool-1) 14%, transparent),
      color-mix(in srgb, var(--cool-2) 12%, transparent),
      color-mix(in srgb, var(--hot-1) 12%, transparent)
    );

    /* Subtle grain */
    --grain:
      repeating-linear-gradient(0deg,
        color-mix(in srgb, white 2%, transparent) 0px,
        transparent 2px,
        transparent 6px
      );

    --ring-size: 3px;
    --ring-offset: 2px;

    /* legacy highlight */
    --accent-hsl: 40 100% 55%;
  }

  /* Optional LIGHT theme, only if you explicitly set <html data-theme="light"> */
  :root[data-theme="light"] {
    color-scheme: light;

    --neutral-0: oklch(0.98 0.01 260);
    --neutral-1: oklch(0.96 0.012 260);
    --neutral-2: oklch(0.93 0.014 260);
    --neutral-3: oklch(0.86 0.016 260);

    --text-1: color-mix(in srgb, black 86%, var(--cool-1));
    --text-2: color-mix(in srgb, black 55%, var(--cool-1));
    --text-3: color-mix(in srgb, var(--text-2) 80%, var(--surface-0));
    --placeholder: color-mix(in srgb, var(--text-2) 70%, var(--surface-0));

    --text-ink: var(--text-1);
    --text-muted: var(--text-2);

    --stroke-1: color-mix(in srgb, black 10%, transparent);
    --stroke-2: color-mix(in srgb, black 16%, transparent);
    --stroke-inner: var(--stroke-1);
    --stroke-outer: var(--stroke-2);

    --scrim: color-mix(in srgb, black 28%, transparent);
    --shadow-color: color-mix(in srgb, black 20%, transparent);

    --glass-soft: color-mix(in srgb, white 72%, transparent);
    --glass-mid: color-mix(in srgb, white 84%, transparent);
    --glass-strong: color-mix(in srgb, white 92%, transparent);
    --glass-1: var(--surface-1);
    --glass-2: var(--surface-2);
    --glass-3: color-mix(in srgb, white 68%, transparent);

    --glass-bg: var(--glass-mid);
    --glass-stroke: var(--stroke-inner);
    --glass-stroke-strong: var(--stroke-outer);

    --bg-aurora:
      radial-gradient(1100px 800px at 18% -10%,
        color-mix(in srgb, var(--cool-1) 22%, transparent) 0%,
        transparent 60%),
      radial-gradient(1200px 900px at 52% 0%,
        color-mix(in srgb, var(--hot-1) 24%, transparent) 0%,
        transparent 62%),
      radial-gradient(1200px 900px at 92% 10%,
        color-mix(in srgb, var(--hot-2) 22%, transparent) 0%,
        transparent 62%),
      var(--neutral-0);
  }

  /* OKLCH fallback */
  @supports not (color: oklch(62% 0.18 250)) {
    :root {
      --neutral-0: hsl(255 36% 6%);
      --neutral-1: hsl(255 30% 10%);
      --neutral-2: hsl(255 26% 15%);
      --neutral-3: hsl(255 22% 22%);

      --text-ink: hsl(210 20% 96%);
      --text-muted: hsl(210 10% 76%);

      --stroke-1: color-mix(in srgb, white 12%, transparent);
      --stroke-2: color-mix(in srgb, white 20%, transparent);

      --scrim: color-mix(in srgb, black 58%, transparent);
      --shadow-color: color-mix(in srgb, black 66%, transparent);

      --bg-aurora:
        radial-gradient(1200px 900px at 14% -10%,
          color-mix(in srgb, var(--cool-1) 28%, transparent) 0%,
          transparent 62%),
        radial-gradient(1000px 800px at 78% 8%,
          color-mix(in srgb, var(--hot-1) 24%, transparent) 0%,
          transparent 62%),
        radial-gradient(1100px 900px at 58% 120%,
          color-mix(in srgb, var(--cool-2) 20%, transparent) 0%,
          transparent 66%),
        radial-gradient(1200px 900px at 30% 110%,
          color-mix(in srgb, var(--hot-2) 18%, transparent) 0%,
          transparent 68%),
        var(--neutral-0);
    }
  }
}

/* --------------------------------------------
   3) Base
-------------------------------------------- */
@layer base {
  html {
    font-size: 16px;
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }

  body {
    position: relative;
    isolation: isolate;
    background: var(--neutral-0);
    color: var(--text-1);
    font-family: var(--font-sans);
    font-size: var(--fs-2);
    line-height: var(--lh-normal);
    font-kerning: normal;
  }

  /* Aurora backdrop */
  body::before {
    content: "";
    position: fixed;
    inset: 0;
    z-index: -2;
    pointer-events: none;
    background: var(--bg-aurora);
    filter: saturate(1.1) brightness(0.95) contrast(1.04);
  }

  /* Grain overlay */
  body::after {
    content: "";
    position: fixed;
    inset: 0;
    z-index: -1;
    pointer-events: none;
    background: var(--grain);
    opacity: 0.06;
    mix-blend-mode: overlay;
  }

  @media (prefers-reduced-motion: no-preference) {
    html:focus-within { scroll-behavior: smooth; }
  }

  :where(h1) { font-size: var(--fs-5); line-height: var(--lh-tight); letter-spacing: -0.03em; }
  :where(h2) { font-size: var(--fs-4); line-height: var(--lh-tight); letter-spacing: -0.02em; }
  :where(h3) { font-size: var(--fs-3); line-height: var(--lh-tight); letter-spacing: -0.01em; }
  :where(p) { max-inline-size: 70ch; }

  :where(code, pre, kbd, samp) {
    font-family: var(--font-mono);
    font-size: 0.95em;
  }

  :where(pre) {
    padding: var(--space-4);
    border-radius: var(--radius-control);
    background: color-mix(in srgb, var(--glass-bg) 80%, transparent);
    border: var(--border-1) solid var(--stroke-2);
    overflow: auto;
  }

  :where(a[href]) {
    text-decoration: none;
    text-underline-offset: 0.18em;
    text-decoration-thickness: 0.08em;
  }
  :where(a[href]:hover),
  :where(a[href]:focus-visible) { text-decoration: underline; }

  :where(:focus-visible) {
    outline: var(--ring-size) solid var(--focus-ring);
    outline-offset: var(--ring-offset);
  }

  @supports not selector(:focus-visible) {
    :where(:focus) {
      outline: var(--ring-size) solid var(--focus-ring);
      outline-offset: var(--ring-offset);
    }
  }

  :where(button, [role="button"], input, select, textarea) { touch-action: manipulation; }

  ::selection { background: color-mix(in srgb, var(--hot-1) 30%, transparent); }

  @media (prefers-reduced-motion: reduce) {
    html:focus-within { scroll-behavior: auto; }
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  :root { scrollbar-gutter: stable; }
}

/* --------------------------------------------
   4) Layout
-------------------------------------------- */
@layer layout {
  .container {
    inline-size: min(100% - (var(--gutter) * 2), var(--container-max));
    margin-inline: auto;
  }

  .stack { display: grid; gap: var(--space-4); }
  .cluster { display: flex; flex-wrap: wrap; gap: var(--space-3); align-items: center; }
  .cluster--between { justify-content: space-between; inline-size: 100%; }
  .grid { display: grid; gap: var(--space-4); }

  .virtual-list {
    content-visibility: auto;
    contain: content;
    contain-intrinsic-size: 1px 800px;
  }
}

/* --------------------------------------------
   5) Components (glass + gradient edges)
-------------------------------------------- */
@layer components {
  /* Buttons: canonical .button, .btn is alias */
  :where(.button, .btn) {
    --_shadow: var(--shadow-1);

    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);

    padding-inline: var(--space-4);
    padding-block: var(--space-2);

    min-block-size: var(--_height, var(--tap, 48px));
    border-radius: var(--radius-pill);
    border: var(--border-1) solid var(--stroke-inner);

    background: var(--surface-2);

    color: var(--text-1);
    font-weight: 600;
    letter-spacing: -0.01em;

    box-shadow: var(--_shadow), inset 0 1px 0 var(--surface-highlight);
    transition:
      transform var(--dur-press) var(--ease-standard),
      filter var(--dur-press) var(--ease-standard),
      box-shadow var(--dur-quick) var(--ease-standard);
  }

  @supports (backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px)) {
    :where(.button, .btn) {
      backdrop-filter: blur(var(--glass-blur-soft));
      -webkit-backdrop-filter: blur(var(--glass-blur-soft));
    }
  }

  :where(.button, .btn):hover:not(:disabled):not([aria-disabled="true"]) {
    filter: brightness(1.04);
    box-shadow: var(--shadow-2);
  }
  :where(.button, .btn):active:not(:disabled):not([aria-disabled="true"]) {
    transform: translateY(1px) scale(0.99);
    filter: brightness(0.98);
  }

  :where(.button, .btn):disabled,
  :where(.button, .btn)[aria-disabled="true"] {
    opacity: 0.55;
    cursor: not-allowed;
    pointer-events: none;
    box-shadow: none;
  }

  /* Variants */
  :where(.button--primary, .btn--primary) {
    background: color-mix(in srgb, var(--surface-2) 86%, var(--hot-1) 14%);
    border-color: color-mix(in srgb, var(--hot-1) 45%, transparent);
    color: var(--text-1);
    box-shadow: var(--glow-hot), var(--shadow-2);
    text-shadow: var(--text-shadow);
  }

  :where(.button--secondary, .btn--secondary) {
    background: var(--surface-2);
    border-color: var(--stroke-inner);
  }

  :where(.button--ghost, .btn--ghost) {
    background: transparent;
    border: var(--border-1) solid transparent;
    color: var(--text-2);
    box-shadow: none;
  }

  :where(.button--ghost, .btn--ghost):hover:not(:disabled):not([aria-disabled="true"]) {
    background: color-mix(in srgb, var(--surface-2) 30%, transparent);
    color: var(--text-1);
    filter: none;
    box-shadow: none;
  }

  :where(.button--danger, .btn--danger) {
    background: color-mix(in srgb, var(--surface-2) 84%, var(--danger-1) 16%);
    border-color: color-mix(in srgb, var(--danger-1) 45%, transparent);
    color: color-mix(in srgb, var(--danger-1) 88%, white);
    box-shadow: none;
  }

  /* Sizes */
  :where(.button--sm, .btn--sm) { --_height: 48px; padding-inline: var(--space-3); font-size: var(--fs-1); }
  :where(.button--md, .btn--md) { --_height: 48px; padding-inline: var(--space-4); font-size: var(--fs-2); }
  :where(.button--lg, .btn--lg) { --_height: 56px; padding-inline: var(--space-5); font-size: var(--fs-3); }

  :where(.icon-button) {
    --_height: var(--tap, 48px);
    inline-size: var(--tap, 48px);
    padding: 0;
    display: inline-grid;
    place-items: center;
  }

  :where(.icon-button.button--ghost, .icon-button.btn--ghost) {
    background: color-mix(in srgb, var(--surface-2) 35%, transparent);
    border-color: var(--stroke-inner);
  }

  /* Segmented control */
  .segmented {
    display: inline-flex;
    gap: var(--space-1);
    padding: var(--space-1);
    border-radius: var(--radius-pill);
    border: var(--border-1) solid var(--stroke-inner);
    background: var(--surface-2);
    box-shadow: var(--shadow-1), inset 0 1px 0 var(--surface-highlight);
  }

  @supports (backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px)) {
    .segmented { backdrop-filter: blur(var(--glass-blur-soft)); -webkit-backdrop-filter: blur(var(--glass-blur-soft)); }
  }

  .segmented > :where(.button, .btn) {
    background: transparent;
    border: var(--border-1) solid transparent;
    box-shadow: none;
    color: var(--text-2);
    padding-inline: var(--space-3);
    border-radius: var(--radius-pill);
    min-block-size: 40px;
  }

  .segmented > :where(.button--primary, .btn--primary) {
    background: color-mix(in srgb, var(--surface-2) 80%, var(--hot-1) 20%);
    border-color: color-mix(in srgb, var(--hot-1) 45%, transparent);
    color: var(--text-1);
    box-shadow: var(--glow-hot);
  }

  /* Card (key: dark glass, not pastel) */
  .card {
    container-type: inline-size;
    position: relative;
    border-radius: var(--radius-card);
    border: var(--border-1) solid var(--stroke-outer);
    background: var(--surface-1);

    box-shadow: var(--shadow-2), inset 0 1px 0 var(--surface-highlight);
    overflow: clip;
  }

  @supports (backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px)) {
    .card {
      backdrop-filter: blur(var(--glass-blur));
      -webkit-backdrop-filter: blur(var(--glass-blur));
    }
  }

  .card::after {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: var(--surface-noise);
    opacity: var(--surface-noise-opacity);
    mix-blend-mode: overlay;
  }

  .card__body { position: relative; padding: var(--space-5); display: grid; gap: var(--space-3); }
  .card__title {
    font-size: var(--fs-2);
    font-weight: 650;
    line-height: var(--lh-tight);
    letter-spacing: -0.01em;
    text-shadow: var(--text-shadow);
  }
  .card__meta { color: var(--text-2); font-size: var(--fs-1); }

  .page-title {
    font-size: var(--fs-5);
    font-weight: 720;
    line-height: var(--lh-tight);
    letter-spacing: -0.03em;
    text-shadow: var(--text-shadow);
  }

  .section-title {
    font-size: var(--fs-3);
    font-weight: 680;
    line-height: var(--lh-tight);
    letter-spacing: -0.02em;
    text-shadow: var(--text-shadow);
  }

  @container (min-width: 34rem) {
    .card__body { padding: calc(var(--space-5) * 1.15); gap: var(--space-4); }
  }

  /* Fields */
  .field { display: grid; gap: var(--space-2); }
  .label { font-size: var(--fs-1); color: var(--text-2); }

  .input,
  .select,
  .textarea {
    inline-size: 100%;
    padding-inline: var(--space-3);
    padding-block: var(--space-2);
    min-block-size: var(--tap, 48px);
    border-radius: var(--radius-pill);
    border: var(--border-1) solid var(--stroke-inner);
    background: var(--surface-2);
    color: var(--text-1);
    box-shadow: inset 0 1px 0 var(--surface-highlight);
    transition: filter var(--dur-quick) var(--ease-standard), box-shadow var(--dur-quick) var(--ease-standard);
  }

  @supports (backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px)) {
    .input, .select, .textarea {
      backdrop-filter: blur(var(--glass-blur-soft));
      -webkit-backdrop-filter: blur(var(--glass-blur-soft));
    }
  }

  .textarea {
    min-block-size: 10lh;
    resize: vertical;
    border-radius: var(--radius-card);
    padding-block: var(--space-3);
    line-height: var(--lh-relaxed);
  }

  .input::placeholder,
  .textarea::placeholder {
    color: var(--placeholder);
    opacity: 1;
  }

  .input:focus-visible,
  .select:focus-visible,
  .textarea:focus-visible {
    outline: none;
    box-shadow:
      0 0 0 var(--ring-size) color-mix(in srgb, var(--focus-ring) 45%, transparent),
      var(--shadow-1);
    filter: brightness(1.05);
  }

  .input:disabled,
  .select:disabled,
  .textarea:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  .help { font-size: var(--fs-1); color: var(--text-2); }
  .error { color: color-mix(in srgb, var(--danger-1) 88%, white); font-size: var(--fs-1); }

  /* Badge */
  .badge {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    padding-inline: var(--space-2);
    padding-block: var(--space-1);
    border-radius: var(--radius-pill);
    border: var(--border-1) solid var(--stroke-inner);
    background: color-mix(in srgb, var(--surface-2) 70%, transparent);
    font-size: var(--fs-1);
    color: var(--text-2);
    white-space: nowrap;
  }

  .badge--brand {
    color: var(--text-1);
    background: color-mix(in srgb, var(--surface-2) 70%, var(--hot-1) 30%);
    border: var(--border-1) solid color-mix(in srgb, var(--hot-1) 45%, transparent);
    box-shadow: var(--glow-hot);
  }

  .badge--info {
    color: var(--text-1);
    background: color-mix(in srgb, var(--surface-2) 70%, var(--cool-1) 30%);
    border-color: color-mix(in srgb, var(--cool-1) 45%, transparent);
  }

  .badge--success {
    color: var(--text-1);
    background: color-mix(in srgb, var(--surface-2) 70%, var(--cool-2) 30%);
    border-color: color-mix(in srgb, var(--cool-2) 45%, transparent);
  }

  .badge--warn {
    color: var(--text-1);
    background: color-mix(in srgb, var(--surface-2) 70%, var(--hot-1) 30%);
    border-color: color-mix(in srgb, var(--hot-1) 45%, transparent);
  }

  /* Chips + pills */
  .chip {
    display: inline-flex;
    align-items: center;
    gap: var(--space-2);
    min-block-size: var(--tap, 48px);
    padding-inline: var(--space-3);
    border-radius: var(--radius-pill);
    border: var(--border-1) solid var(--stroke-inner);
    background: var(--surface-2);
    color: var(--text-2);
    font-size: var(--fs-1);
    box-shadow: inset 0 1px 0 var(--surface-highlight);
  }

  .chip:hover {
    filter: brightness(1.04);
  }

  .chip:active {
    transform: translateY(1px);
  }

  .chip:focus-visible {
    outline: none;
    box-shadow: 0 0 0 var(--ring-size) color-mix(in srgb, var(--focus-ring) 45%, transparent);
  }

  .chip:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  .chip--active {
    color: var(--text-1);
    border-color: color-mix(in srgb, var(--cool-1) 45%, transparent);
    box-shadow: var(--glow-cool);
  }

  .pill {
    display: grid;
    gap: 2px;
    align-items: center;
    min-block-size: var(--tap, 48px);
    padding-inline: var(--space-3);
    padding-block: var(--space-2);
    border-radius: var(--radius-pill);
    border: var(--border-1) solid transparent;
    background: color-mix(in srgb, var(--surface-2) 80%, transparent);
    color: var(--text-1);
    box-shadow: inset 0 1px 0 var(--surface-highlight);
  }

  .pill__label {
    font-size: var(--fs-1);
    color: var(--text-3);
    letter-spacing: 0.02em;
    text-transform: uppercase;
  }

  .pill__value {
    font-size: var(--fs-3);
    font-weight: 700;
    line-height: 1.1;
    text-shadow: var(--text-shadow);
  }

  .pill--strong {
    background: color-mix(in srgb, var(--surface-2) 70%, var(--hot-1) 12%);
    border-color: color-mix(in srgb, var(--hot-1) 40%, transparent);
    box-shadow: var(--glow-hot), inset 0 1px 0 var(--surface-highlight);
  }

  @supports (backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px)) {
    .badge {
      backdrop-filter: blur(var(--glass-blur-soft));
      -webkit-backdrop-filter: blur(var(--glass-blur-soft));
    }
  }

  /* Dialog */
  .dialog {
    position: relative;
    border-radius: var(--radius-card);
    border: var(--border-1) solid var(--stroke-outer);
    background: var(--surface-3);
    box-shadow: var(--shadow-3), inset 0 1px 0 var(--surface-highlight);
    overflow: clip;
  }

  .dialog::after {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    background: var(--surface-noise);
    opacity: var(--surface-noise-opacity);
    mix-blend-mode: overlay;
  }

  @supports (backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px)) {
    .dialog { backdrop-filter: blur(var(--glass-blur-strong)); -webkit-backdrop-filter: blur(var(--glass-blur-strong)); }
  }

  .dialog__body { padding: var(--space-5); }
  .dialog__footer {
    padding: var(--space-4);
    border-top: var(--border-1) solid var(--stroke-inner);
    display: flex;
    justify-content: flex-end;
    gap: var(--space-3);
  }
}

/* --------------------------------------------
   6) Motion (keep minimal here)
-------------------------------------------- */
@layer motion {
  @supports (view-transition-name: vt-hero) {
    .vt-hero { view-transition-name: vt-hero; }
  }
}

/* --------------------------------------------
   7) Utilities
-------------------------------------------- */
@layer utilities {
  .sr-only {
    position: absolute;
    inline-size: 1px;
    block-size: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0 0 0 0);
    clip-path: inset(50%);
    white-space: nowrap;
    border: 0;
  }

  .flow > * + * { margin-block-start: var(--space-4); }

  .muted { color: var(--text-2); }
  .mono { font-family: var(--font-mono); }

  .tabular-nums {
    font-variant-numeric: tabular-nums;
    font-feature-settings: "tnum";
  }

  .center { display: grid; place-items: center; }

  .truncate { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
  .nowrap { white-space: nowrap; }

  .p-4 { padding: var(--space-4); }
  .p-5 { padding: var(--space-5); }
  .px-4 { padding-inline: var(--space-4); }
  .py-3 { padding-block: var(--space-3); }
  .gap-3 { gap: var(--space-3); }
  .gap-4 { gap: var(--space-4); }

  .switcher {
    container-type: inline-size;
    display: grid;
    gap: var(--space-4);
  }
  @container (min-width: 42rem) {
    .switcher { grid-template-columns: 1fr 1fr; align-items: start; }
  }
}

@layer overrides {}
